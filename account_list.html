<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>TN Messenger Service - ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ö‡∏±‡∏ç‡∏ä‡∏µ‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ</title>

  <link href="https://fonts.googleapis.com/css2?family=Prompt:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  <script src="https://unpkg.com/feather-icons"></script>

  <!-- --------------------------------- -->
  <!-- 1. FIREBASE SDK AND CONFIGURATION -->
  <!-- --------------------------------- -->
  <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/9.23.0/firebase-app.js";
    // üî¥ REMOVED: ‡∏•‡∏ö signOut ‡πÄ‡∏û‡∏£‡∏≤‡∏∞‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏õ‡∏∏‡πà‡∏°‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏£‡∏∞‡∏ö‡∏ö‡πÅ‡∏•‡πâ‡∏ß
    import { getAuth, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/9.23.0/firebase-auth.js";
    import { getAnalytics } from "https://www.gstatic.com/firebasejs/9.23.0/firebase-analytics.js";

    // üéØ CONFIGURATION
    // üü¢ UPDATED: ‡πÉ‡∏ä‡πâ‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ Firebase ‡πÉ‡∏´‡∏°‡πà‡∏ï‡∏≤‡∏°‡∏ó‡∏µ‡πà‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏£‡∏∞‡∏ö‡∏∏
    const firebaseConfig = {
      apiKey: "AIzaSyAJuzeWubCbptP53uAhraSA587ldtar74A",
      authDomain: "tn-messenger-servicess.firebaseapp.com",
      projectId: "tn-messenger-servicess",
      storageBucket: "tn-messenger-servicess.firebasestorage.app",
      messagingSenderId: "563656707840",
      appId: "1:563656707840:web:c7a484757eecac9b3c2de5",
      measurementId: "G-LM1JH2LDXH"
    };

    const app = initializeApp(firebaseConfig);
    const auth = getAuth(app);
    const analytics = getAnalytics(app);

    window.firebaseAuth = auth;

    /**
     * ‡∏î‡∏∂‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô‡∏°‡∏≤‡πÅ‡∏™‡∏î‡∏á
     */
    function loadCurrentUser(user) {
      const detailContainer = document.getElementById('accountDetails');
      const cardContainer = document.getElementById('accountCard');
      // üü¢ ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç: ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Å‡∏≤‡∏£‡πÅ‡∏™‡∏î‡∏á‡∏ä‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ (Display Name) ‡∏ñ‡πâ‡∏≤‡∏°‡∏µ
      const userName = user.displayName || (user.email ? user.email.split('@')[0] : '‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ');
      const registerTime = new Date(user.metadata.creationTime).toLocaleString('th-TH');

      let html = `
        <div class="detail-row">
            <span class="label">‡∏ä‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ</span>
            <span class="value">${userName}</span>
        </div>
        <div class="detail-row">
            <span class="label">‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞</span>
            <span class="value status-active">‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö</span>
        </div>
        <div class="detail-row">
            <span class="label">UID (User ID)</span>
            <span class="value">${user.uid}</span>
        </div>
        <div class="detail-row">
            <span class="label">‡∏≠‡∏µ‡πÄ‡∏°‡∏•</span>
            <span class="value">${user.email || '‡πÑ‡∏°‡πà‡∏£‡∏∞‡∏ö‡∏∏'}</span>
        </div>
        <div class="detail-row">
            <span class="label">‡∏•‡∏á‡∏ó‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ô‡πÄ‡∏°‡∏∑‡πà‡∏≠</span>
            <span class="value">${registerTime}</span>
        </div>
      `;
      detailContainer.innerHTML = html;

      // üü¢ ‡πÅ‡∏™‡∏î‡∏á‡∏ú‡∏•‡∏≠‡∏á‡∏Ñ‡πå‡∏õ‡∏£‡∏∞‡∏Å‡∏≠‡∏ö‡∏ó‡∏µ‡πà‡∏ã‡πà‡∏≠‡∏ô‡πÑ‡∏ß‡πâ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡∏´‡∏•‡∏±‡∏á‡∏à‡∏≤‡∏Å‡πÇ‡∏´‡∏•‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏™‡∏£‡πá‡∏à
      document.getElementById('loading').style.display = 'none';
      document.getElementById('redirectingMessage').style.display = 'none';
      
      cardContainer.style.display = 'block'; // ‡πÅ‡∏™‡∏î‡∏á Account Card
      // üî¥ REMOVED: ‡∏•‡∏ö‡∏Å‡∏≤‡∏£‡πÅ‡∏™‡∏î‡∏á‡∏õ‡∏∏‡πà‡∏°‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏£‡∏∞‡∏ö‡∏ö
    }
    
    // üî¥ REMOVED: ‡∏•‡∏ö‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô handleSignOut() ‡∏≠‡∏≠‡∏Å‡πÄ‡∏û‡∏£‡∏≤‡∏∞‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏õ‡∏∏‡πà‡∏°‡πÉ‡∏´‡πâ‡πÄ‡∏£‡∏µ‡∏¢‡∏Å‡πÉ‡∏ä‡πâ‡πÅ‡∏•‡πâ‡∏ß


    // ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏Å‡∏≤‡∏£‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö
    onAuthStateChanged(auth, (user) => {
      if (user) {
        // ‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏•‡πá‡∏≠‡∏Å‡∏≠‡∏¥‡∏ô‡πÅ‡∏•‡πâ‡∏ß
        loadCurrentUser(user);
      } else {
        // ‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡∏•‡πá‡∏≠‡∏Å‡∏≠‡∏¥‡∏ô ‡∏´‡∏£‡∏∑‡∏≠‡πÄ‡∏ã‡∏™‡∏ä‡∏±‡∏ô‡∏´‡∏°‡∏î‡∏≠‡∏≤‡∏¢‡∏∏
        // üü¢ ‡∏Å‡∏≤‡∏£‡∏´‡∏ô‡πà‡∏ß‡∏á‡πÄ‡∏ß‡∏•‡∏≤ 1.5 ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ‡∏ä‡πà‡∏ß‡∏¢‡πÉ‡∏´‡πâ‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡πÄ‡∏´‡πá‡∏ô‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô‡∏Å‡πà‡∏≠‡∏ô‡πÄ‡∏î‡πâ‡∏á
        console.warn("User not logged in. Redirecting to dashboard.");
        document.getElementById('loading').style.display = 'none';
        document.getElementById('redirectingMessage').style.display = 'block';
        
        // ‡∏´‡∏ô‡πà‡∏ß‡∏á‡πÄ‡∏ß‡∏•‡∏≤‡πÄ‡∏•‡πá‡∏Å‡∏ô‡πâ‡∏≠‡∏¢‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡πÄ‡∏´‡πá‡∏ô‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°
        setTimeout(() => {
            window.location.href = 'dashboard.html';
        }, 1500); // ‡∏´‡∏ô‡πà‡∏ß‡∏á 1.5 ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ
      }
    });

  </script>

  <!-- --------------------------------- -->
  <!-- 2. CSS STYLES -->
  <!-- --------------------------------- -->
  <style>
    :root {
      --primary: #1e3a8a;
      --primary-light: #3b82f6;
      --text: #111827;
      --text-light: #6b7280;
      --bg: #f3f4f6;
      --white: #ffffff;
    }

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'Prompt', sans-serif;
      background: var(--bg);
      display: flex;
      min-height: 100vh;
      justify-content: center;
      padding: 30px;
    }

    .main-container {
      width: 100%;
      max-width: 900px;
    }

    .header {
      margin-bottom: 30px;
      text-align: center;
      position: relative; /* ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏à‡∏±‡∏î‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á‡∏õ‡∏∏‡πà‡∏° back-button-top ‡πÑ‡∏î‡πâ */
      padding-top: 50px; /* ‡πÄ‡∏û‡∏¥‡πà‡∏° padding ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ‡∏°‡∏µ‡∏ó‡∏µ‡πà‡∏ß‡πà‡∏≤‡∏á‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏õ‡∏∏‡πà‡∏° */
    }

    /* üü¢ UPDATED: ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏™‡∏µ‡∏õ‡∏∏‡πà‡∏°‡πÄ‡∏õ‡πá‡∏ô‡∏™‡∏µ‡∏ò‡∏µ‡∏°‡∏´‡∏•‡∏±‡∏Å */
    .back-button-top {
        position: absolute;
        top: 0;
        left: 0;
        display: inline-flex;
        align-items: center;
        gap: 5px;
        padding: 8px 15px;
        background: var(--primary); /* ‡πÉ‡∏ä‡πâ‡∏™‡∏µ‡∏ò‡∏µ‡∏°‡∏´‡∏•‡∏±‡∏Å */
        color: white;
        text-decoration: none;
        border-radius: 8px;
        font-weight: 500;
        transition: background 0.2s;
    }

    .back-button-top:hover {
      background: #102e70; /* ‡πÉ‡∏ä‡πâ‡∏™‡∏µ‡πÄ‡∏Ç‡πâ‡∏°‡∏Ç‡∏∂‡πâ‡∏ô‡πÄ‡∏•‡πá‡∏Å‡∏ô‡πâ‡∏≠‡∏¢‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö hover (‡∏à‡∏≤‡∏Å dashboard.html hover) */
    }


    .header h1 {
      font-size: 34px;
      color: var(--primary);
      font-weight: 700;
      margin-bottom: 5px;
    }

    .header p {
      font-size: 16px;
      color: var(--text-light);
    }
    
    .account-card {
      background: var(--white);
      padding: 30px;
      border-radius: 18px;
      box-shadow: 0 6px 18px rgba(0, 0, 0, 0.08);
      border-top: 6px solid var(--primary);
      /* üî¥ REMOVED: ‡∏•‡∏ö margin-bottom ‡∏≠‡∏≠‡∏Å‡πÄ‡∏•‡πá‡∏Å‡∏ô‡πâ‡∏≠‡∏¢‡πÄ‡∏ô‡∏∑‡πà‡∏≠‡∏á‡∏à‡∏≤‡∏Å‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏õ‡∏∏‡πà‡∏°‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏£‡∏∞‡∏ö‡∏ö‡πÅ‡∏•‡πâ‡∏ß */
      margin-bottom: 10px; 
    }

    .card-title {
      font-size: 24px;
      font-weight: 600;
      color: var(--text);
      border-bottom: 1px solid #e5e7eb;
      padding-bottom: 15px;
      margin-bottom: 20px;
    }

    .detail-row {
      display: flex;
      justify-content: space-between;
      padding: 12px 0;
      border-bottom: 1px dashed #f3f4f6;
    }

    .detail-row:last-child {
      border-bottom: none;
    }

    .label {
      font-weight: 500;
      color: var(--text-light);
      width: 150px;
    }

    .value {
      font-weight: 600;
      color: var(--text);
      flex-grow: 1;
      text-align: right;
      word-break: break-all;
    }

    .status-active {
      color: #10b981;
      /* emerald-500 */
    }

    .loading-message {
        text-align: center;
        padding: 50px;
        color: var(--text-light);
    }

    .redirecting-message {
        text-align: center;
        padding: 50px;
        color: #ef4444; /* red-500 */
        font-weight: 600;
        display: none; /* ‡∏ã‡πà‡∏≠‡∏ô‡πÑ‡∏ß‡πâ‡∏Å‡πà‡∏≠‡∏ô */
    }

    /* üî¥ REMOVED: ‡∏•‡∏ö‡∏™‡πÑ‡∏ï‡∏•‡πå‡∏ó‡∏µ‡πà‡πÄ‡∏Å‡∏µ‡πà‡∏¢‡∏ß‡∏Ç‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ö‡∏õ‡∏∏‡πà‡∏°‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏£‡∏∞‡∏ö‡∏ö (sign-out-button) ‡∏≠‡∏≠‡∏Å */
    
    @media (max-width: 600px) {
        .header {
            padding-top: 30px; /* ‡∏•‡∏î padding ‡∏ö‡∏ô‡∏°‡∏∑‡∏≠‡∏ñ‡∏∑‡∏≠ */
        }
        .back-button-top {
            padding: 6px 12px;
            font-size: 14px;
        }
        .header h1 {
            font-size: 28px;
        }
    }
  </style>
</head>

<body>
  <div class="main-container">
    
    <div class="header">
        <!-- üü¢ NEW: ‡∏õ‡∏∏‡πà‡∏°‡∏ñ‡∏π‡∏Å‡∏¢‡πâ‡∏≤‡∏¢‡∏°‡∏≤‡∏≠‡∏¢‡∏π‡πà‡∏ï‡∏£‡∏á‡∏ô‡∏µ‡πâ -->
        <a href="dashboard.html" class="back-button-top">
            <i data-feather="arrow-left" style="width:18px; height:18px;"></i> ‡∏Å‡∏•‡∏±‡∏ö‡∏™‡∏π‡πà Dashboard
        </a>
        
        <h1 onclick="window.location.href='dashboard.html'" style="cursor: pointer;">‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ö‡∏±‡∏ç‡∏ä‡∏µ‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ</h1>
        <p>‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡∏ö‡∏±‡∏ç‡∏ä‡∏µ‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πâ‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö‡∏£‡∏∞‡∏ö‡∏ö TN Messenger Service</p>
    </div>


    <div id="loading" class="loading-message">
        <i data-feather="loader" style="animation: spin 1s linear infinite;"></i> ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÇ‡∏´‡∏•‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ö‡∏±‡∏ç‡∏ä‡∏µ...
    </div>

    <!-- üü¢ NEW: ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Å‡∏≤‡∏£‡∏•‡πá‡∏≠‡∏Å‡∏≠‡∏¥‡∏ô -->
    <div id="redirectingMessage" class="redirecting-message">
        <i data-feather="alert-triangle" style="width:24px; height:24px;"></i> ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏•‡πá‡∏≠‡∏Å‡∏≠‡∏¥‡∏ô‡∏Å‡πà‡∏≠‡∏ô: ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÄ‡∏™‡πâ‡∏ô‡∏ó‡∏≤‡∏á‡∏Å‡∏•‡∏±‡∏ö‡πÑ‡∏õ‡∏´‡∏ô‡πâ‡∏≤ Dashboard...
    </div>


    <div id="accountCard" class="account-card" style="display: none;">
      <div class="card-title">
        <i data-feather="user" style="width:20px; height:20px;"></i> ‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡∏ö‡∏±‡∏ç‡∏ä‡∏µ‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô
      </div>
      <div id="accountDetails">
        <!-- ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ö‡∏±‡∏ç‡∏ä‡∏µ‡∏à‡∏∞‡∏ñ‡∏π‡∏Å‡πÅ‡∏ó‡∏£‡∏Å‡∏ó‡∏µ‡πà‡∏ô‡∏µ‡πà‡πÇ‡∏î‡∏¢ JavaScript -->
      </div>
      
      <!-- üî¥ REMOVED: ‡∏•‡∏ö‡∏õ‡∏∏‡πà‡∏° Sign Out ‡∏≠‡∏≠‡∏Å -->

    </div>

  </div>

  <script>
    feather.replace();
  </script>

</body>

</html>